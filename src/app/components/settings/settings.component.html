<div class="settings-container">
  <div class="settings-header">
    <h2>Configura√ß√µes</h2>
    <div class="header-actions">
      <button (click)="onReset()" class="btn btn-secondary">
        Restaurar Padr√µes
      </button>
      <button (click)="onSave()" class="btn btn-primary">
        Salvar Configura√ß√µes
      </button>
    </div>
  </div>

  <div class="settings-sections">
    <!-- Configura√ß√µes de Conex√£o -->
    <div class="settings-section">
      <h3>üîó Conex√£o</h3>
      <div class="setting-item">
        <label for="ollama-url">URL do Ollama:</label>
        <input
          id="ollama-url"
          type="text"
          [(ngModel)]="settings.ollamaUrl"
          placeholder="http://localhost:11434"
        />
        <small>URL base para conectar ao servidor Ollama</small>
      </div>
    </div>

    <!-- Configura√ß√µes de Modelo -->
    <div class="settings-section">
      <h3>ü§ñ Modelo Padr√£o</h3>
      <div class="setting-item">
        <label for="default-model">Modelo Padr√£o:</label>
        <input
          id="default-model"
          type="text"
          [(ngModel)]="settings.defaultModel"
          placeholder="llama3"
        />
        <small>Modelo que ser√° selecionado automaticamente</small>
      </div>
    </div>

    <!-- Par√¢metros de Gera√ß√£o -->
    <div class="settings-section">
      <h3>‚ö° Par√¢metros de Gera√ß√£o</h3>

      <div class="setting-item">
        <label for="temperature"
          >Temperature ({{ settings.temperature }}):</label
        >
        <input
          id="temperature"
          type="range"
          min="0"
          max="2"
          step="0.1"
          [(ngModel)]="settings.temperature"
          class="slider"
        />
        <small
          >Controla a criatividade das respostas (0 = determin√≠stico, 2 = muito
          criativo)</small
        >
      </div>

      <div class="setting-item">
        <label for="top-p">Top P ({{ settings.topP }}):</label>
        <input
          id="top-p"
          type="range"
          min="0"
          max="1"
          step="0.05"
          [(ngModel)]="settings.topP"
          class="slider"
        />
        <small
          >Filtragem de n√∫cleo (0.9 √© recomendado para a maioria dos
          casos)</small
        >
      </div>

      <div class="setting-item">
        <label for="top-k">Top K ({{ settings.topK }}):</label>
        <input
          id="top-k"
          type="range"
          min="1"
          max="100"
          step="1"
          [(ngModel)]="settings.topK"
          class="slider"
        />
        <small>Limita as op√ß√µes de pr√≥xima palavra (40 √© um bom padr√£o)</small>
      </div>

      <div class="setting-item">
        <label for="max-tokens">M√°ximo de Tokens:</label>
        <input
          id="max-tokens"
          type="number"
          min="1"
          max="8192"
          [(ngModel)]="settings.maxTokens"
        />
        <small>N√∫mero m√°ximo de tokens na resposta</small>
      </div>
    </div>

    <!-- Configura√ß√µes de Interface -->
    <div class="settings-section">
      <h3>üé® Interface</h3>

      <div class="setting-item">
        <label for="theme">Tema:</label>
        <select id="theme" [(ngModel)]="settings.theme">
          <option value="light">Claro</option>
          <option value="dark">Escuro</option>
        </select>
        <small>Apar√™ncia da interface</small>
      </div>

      <div class="setting-item checkbox-item">
        <label>
          <input type="checkbox" [(ngModel)]="settings.autoScroll" />
          Rolagem Autom√°tica
        </label>
        <small>Rola automaticamente para a √∫ltima mensagem</small>
      </div>

      <div class="setting-item checkbox-item">
        <label>
          <input type="checkbox" [(ngModel)]="settings.showTimestamps" />
          Mostrar Hor√°rios
        </label>
        <small>Exibe o hor√°rio de cada mensagem</small>
      </div>

      <div class="setting-item checkbox-item">
        <label>
          <input type="checkbox" [(ngModel)]="settings.streamingEnabled" />
          Streaming Habilitado
        </label>
        <small>Recebe respostas em tempo real (recomendado)</small>
      </div>
    </div>

    <!-- Informa√ß√µes do Sistema -->
    <div class="settings-section">
      <h3>üìä Informa√ß√µes do Sistema</h3>
      <div class="system-info">
        <div class="info-item">
          <strong>Status da Conex√£o:</strong>
          <span
            [class]="
              ollamaService.connectionStatus()
                ? 'status-connected'
                : 'status-disconnected'
            "
          >
            {{
              ollamaService.connectionStatus() ? "Conectado" : "Desconectado"
            }}
          </span>
        </div>
        <div class="info-item">
          <strong>Vers√£o do Angular:</strong>
          <span>{{ settingsService.angularInfo() }}</span>
        </div>
        <div class="info-item">
          <strong>Navegador:</strong>
          <span>{{ settingsService.browserInfo() }}</span>
        </div>
      </div>
    </div>

    <!-- Configura√ß√µes Avan√ßadas -->
    <div class="settings-section">
      <h3>üîß Avan√ßado</h3>

      <div class="setting-item">
        <button (click)="onClearCache()" class="btn btn-warning">
          Limpar Cache
        </button>
        <small>Remove todos os dados em cache da aplica√ß√£o</small>
      </div>

      <div class="setting-item">
        <button (click)="onExport()" class="btn btn-info">
          Exportar Configura√ß√µes
        </button>
        <small>Baixa um arquivo com suas configura√ß√µes atuais</small>
      </div>

      <div class="setting-item">
        <label for="import-settings">Importar Configura√ß√µes:</label>
        <input
          id="import-settings"
          type="file"
          accept=".json"
          (change)="onImport($event)"
          #fileInput
        />
        <small>Carrega configura√ß√µes de um arquivo JSON</small>
      </div>
    </div>
  </div>
</div>
